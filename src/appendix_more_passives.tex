\documentclass[main.tex]{subfiles}
\begin{document}

\section{Extra Practice: Determine the step response of the following circuits.} \label{extra_practice:more_passives}

\noindent State any assumptions regarding component values. These questions are more complex then those given in Section \ref{section:passives}, but are fun to consider.

\begin{figure}[H]
    \begin{center}
        \begin{minipage}{0.45\textwidth}
            \centering
            \begin{circuitikz}[american]
                \draw (0,0) to[isource, l=$I_{in}$] (0,3) -- (2,3) to[C=$C$] (2,0) -- (0,0);
                \draw (2, 3) node[right] {$V_{out}$};
                \draw (1, 0) node[ground]{};
                \label{fig:c_current_source}
            \end{circuitikz}
            \caption{Circuit E}
        \end{minipage}%
        \hfill%
        \begin{minipage}{0.45\textwidth}
            \centering
            \begin{circuitikz}[american]
                \draw (0,0) to[isource, l=$I_{in}$] (0,3);
                \draw (0, 3) to[resistor, l=$R$] (3, 3);
                \draw (3, 3) node[right] {$V_{out}$};
                \draw (3, 3) to[capacitor, l=$C$] (3, 0);
                \draw (3, 0) -- (0, 0);
                \draw(1.5, 0) node[ground]{};
                \label{fig:rc_current_source}
            \end{circuitikz}
            \caption{Circuit F}
        \end{minipage}
    \end{center}
\end{figure}
\begin{figure}[H]
    \begin{center}
        \begin{minipage}{0.45\textwidth}
            \centering
            \begin{circuitikz}[american]
                \draw (0, 4) node[anchor=east] {$V_{in}$};
                \draw (0, 4) to[inductor, l=$L$] (5, 4);
                \draw (3.5, 4) to[capacitor, l=$C$] (3.5, 2);
                \draw (5, 4) node[right] {$V_{out}$};
                \draw (-0.5, 2) -- (5.5, 2);
                \draw (3, 2) node[ground]{};
                \label{fig:lseries_cshunt}
            \end{circuitikz}
            \caption{Circuit G}
        \end{minipage}%
        \hfill%
        \begin{minipage}{0.45\textwidth}
            \centering
            \begin{circuitikz}[american]
                \draw (0, 4) node[anchor=east] {$V_{in}$};
                \draw (0, 4) -- (0.75, 4);
                \draw (0.75, 4) to[inductor, l=$L$] (2.5, 4);
                \draw (2.5, 4) to [capacitor, l=$C$] (4.25, 4);
                \draw (4.25, 4) -- (5, 4);
                \draw (5, 4) node[right] {$V_{out}$};
                \draw (-0.5, 2) -- (5.5, 2);
                \draw (3, 2) node[ground]{};
                \label{fig:lseries_cseries}
            \end{circuitikz}
            \caption{Circuit H}
        \end{minipage}
    \end{center}
\end{figure}
% More circuit ideas will be added in the second edition, see notes gdocs

\spoilerline

\subsection{Circuit E: Series Capacitor with Current Source}

Recall that for a capacitor, $I = C \cdot \dfrac{dV}{dt}$ and current through series elements is identical. This results in the solution given in Figure \ref{fig:step-response-series-cap-with-current-source}.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{generated_images/series_cap_with_current_source.png}
    \caption{Step Response of a Circuit with a Series Capacitor and Current Source}
    \label{fig:step-response-series-cap-with-current-source}
\end{figure}

\subsection{Circuit F: Series RC with Current Source}
As current through series elements is identical and for a resistor, $V = I \cdot R$, adding the series resistor does not affect the step response of this circuit. Circuit E and Circuit F have identical step response plots.

\subsection{Circuit G: Series Inductor with Shunt Capacitor}
This circuit results in LC resonance and can be found inside a buck converter circuit. The step response solution is given in Figure \ref{fig:step-response-series-ind-with-shunt-cap}.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{generated_images/series_inductor_with_shunt_cap.png}
    \caption{Step Response of a Circuit with a Series Inductor with Shunt Capacitor}
    \label{fig:step-response-series-ind-with-shunt-cap}
\end{figure}

\subsection{Circuit H: Series Inductor and Capacitor}
This circuit does not result in resonance as there is no current path for the two series elements. The step response solution is $V_{out} = V_{in}$. 
% Very vague for a kind of troll question but yea. 

% TODO : If I wanted to add even more circuits: 
% Circuit G but with series resistor after the L
% Crossing R & C 
% Two pole R-C filter

% TODO : Show the current waveform of the RC step response circuit, sometimes this is asked 

\end{document}
